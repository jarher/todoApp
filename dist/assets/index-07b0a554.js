var C=Object.defineProperty;var D=(n,t,e)=>t in n?C(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var r=(n,t,e)=>(D(n,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const h of i.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();const l=class l{};r(l,"get",t=>document.querySelector(t)),r(l,"getMany",t=>document.getElementsByClassName(t)),r(l,"getText",t=>t==="input"?l.get(t).value:l.get(t).textContent),r(l,"getAttribute",(t,e)=>l.get(t).getAttribute(e));let d=l;class L{constructor(){r(this,"getCompleted",t=>t.filter(e=>e.isCompleted));r(this,"clearCompleted",t=>t.deleteCompleted())}createItem(t){const e=t.getLastIndex(),a=d.getText("input"),s={id:e,itemText:a,isCompleted:!1};return t.createData("todoData",s),s}updateItem(t,e){const a=Number.parseInt(t.dataset.id),s=e.getItem(a)[0];e.getItem(a)[0].isCompleted?s.isCompleted=!1:s.isCompleted=!0,e.updateData(a,s,"todoData")}deleteItem(t,e){const a=Number.parseInt(t.dataset.id);return e.deleteData(a)}}class w{constructor(){r(this,"getLocalStorageData",t=>JSON.parse(localStorage.getItem(t)));r(this,"setLocalStorageData",(t,e)=>localStorage.setItem(t,JSON.stringify(e)));r(this,"readData",t=>this.getLocalStorageData(t));r(this,"updateData",(t,e,a)=>{const s=this.readData(a);s.splice(t,1,e),this.setLocalStorageData(a,s)});r(this,"getLastIndex",()=>this.readData("todoData").length);r(this,"getItem",t=>this.readData("todoData").filter(e=>e.id===t))}createData(t,e){const a=this.readData(t);return a.push(e),this.setLocalStorageData(t,a),a}deleteData(t){const e=this.readData("todoData");return e.splice(t,1),this.setLocalStorageData("todoData",e),e}deleteCompleted(){let t=this.readData("todoData").filter(e=>e.isCompleted===!1);return t=t.map((e,a)=>({id:a,itemText:e.itemText,isCompleted:e.isCompleted})),this.setLocalStorageData("todoData",t),t}}class c{static create(t,e){const a=document.createElement(t);return Object.keys(e).forEach(s=>{a.setAttribute(s,e[s])}),a}}r(c,"writeText",(t,e)=>d.get(t).textContent=e),r(c,"appendToParent",(t,e)=>typeof e=="string"?t.innerHTML=e:t.append(e)),r(c,"remove",t=>t.remove());const u=({id:n,itemText:t,isCompleted:e})=>`
    <span class="indicator ${e?"indicator-active":""}" data-id=${n}></span>
    <span class="todos-item-text ${e?"todos-item-text-completed":""}">${t}</span>
    <button class="todos-delete-btn" data-id=${n}></button>
`;class I{constructor(){r(this,"todosItem",d.getMany("todos-item"));r(this,"show",(t,e)=>t?this.todosItem[e].style.display="flex":this.todosItem[e].style.display="none");r(this,"appendContent",(t,e)=>c.appendToParent(t,e));r(this,"showAllItems",()=>{const t=Array.from(this.todosItem);return t.forEach(e=>e.style.display="flex"),t});r(this,"showActive",t=>(t.forEach(e=>this.show(!e.isCompleted,e.id)),t.filter(e=>!e.isCompleted)));r(this,"showCompleted",t=>(t.forEach(e=>this.show(e.isCompleted,e.id)),t.filter(e=>e.isCompleted)));r(this,"removeItem",t=>c.remove(t))}printItems(t){t.forEach(e=>{const a={class:"todos-item",draggable:!0},s=c.create("div",a),i=u(e);this.appendContent(s,i),this.appendContent(d.get(".todos-container"),s)})}clearCompleted(t){c.appendToParent(d.get(".todos-container"),""),this.printItems(t)}sortElement(){}printItemsNumber(t){let e=0;t.forEach(a=>e++),c.writeText(".itemsNumber",e)}}class m{static changeClass(t,{class_1:e,class_2:a}){return d.get(t).className===e?(this.removeClass(t,d.get(t).className),this.addClass(t,a),a):(this.removeClass(t,a),this.addClass(t,e),e)}}r(m,"addClass",(t,e)=>d.get(t).classList.add(e)),r(m,"removeClass",(t,e)=>d.get(t).classList.remove(e)),r(m,"toggleClass",(t,e)=>t.classList.toggle(e));class b{constructor({controller:t,model:e,view:a}){this.controller=t,this.model=e,this.view=a}listen(){document.addEventListener("click",t=>{if(t.target.className==="toggle-theme"){const e={class_1:"dark-theme",class_2:"light-theme"};this.model.updateData(0,{theme:m.changeClass("body",e,this.model)},"todoTheme")}if(t.target.classList.contains("indicator")&&(m.toggleClass(t.target,"indicator-active"),m.toggleClass(t.target.nextElementSibling,"todos-item-text-completed"),this.controller.updateItem(t.target,this.model)),t.target.classList.contains("todos-delete-btn")){const e=this.controller.deleteItem(t.target,this.model);this.view.removeItem(t.target.parentElement),this.view.printItemsNumber(e)}t.target.id==="allItems"&&this.view.printItemsNumber(this.view.showAllItems()),t.target.id==="activeItems"&&this.view.printItemsNumber(this.view.showActive(this.model.readData("todoData"))),t.target.id==="completedItems"&&this.view.printItemsNumber(this.view.showCompleted(this.model.readData("todoData"))),t.target.id==="clearCompletedItems"&&this.view.clearCompleted(this.controller.clearCompleted(this.model))})}}class y{constructor({controller:t,model:e,view:a}){this.controller=t,this.model=e,this.view=a}listen(){document.addEventListener("keydown",t=>{if(t.key==="Enter"){t.preventDefault();const e=this.controller.createItem(this.model),a=c.create("div",{class:"todos-item",draggable:!0}),s=u(e);this.view.appendContent(a,s),this.view.appendContent(d.get(".todos-container"),a),location.reload()}})}}const g=[{id:0,itemText:"Completed online javaScript course",isCompleted:!0},{id:1,itemText:"Jog around the park 3x",isCompleted:!1},{id:2,itemText:"10 minutes meditation",isCompleted:!1},{id:3,itemText:"Read for 1 hour",isCompleted:!1},{id:4,itemText:"Pick up groceries",isCompleted:!1},{id:5,itemText:"Complete Todo App on Frontend Mentor",isCompleted:!1}];class E{constructor({model:t,view:e}){this.model=t,this.view=e}listen(){document.addEventListener("DOMContentLoaded",()=>{this.model.getLocalStorageData("todoData")===null?(this.view.printItems(g),this.model.setLocalStorageData("todoData",g),this.model.setLocalStorageData("todoTheme",[{theme:"dark-theme"}])):(this.view.printItems(this.model.readData("todoData")),d.get("body").setAttribute("class",this.model.readData("todoTheme")[0].theme));let t=null;function e(o){t=o.target,t.classList.add("hide"),o.dataTransfer.effectAllowed="move",o.dataTransfer.setData("text/html",o.target.innerHTML),o.target.innerHTML=""}function a(o){return o.preventDefault(),t=o.target,!1}function s(o){t!==o.target&&(t.innerHTML=o.target.innerHTML,t.classList.remove("hide"),o.target.innerHTML="")}function i(o){t.classList.remove("hide"),t=o.target}function h(o){o.preventDefault()}function f(o){return o.stopPropagation(),o.target.innerHTML=o.dataTransfer.getData("text/html"),!1}function v(o){o.addEventListener("dragstart",e),o.addEventListener("dragover",a),o.addEventListener("dragenter",s),o.addEventListener("dragleave",i),o.addEventListener("dragend",h),o.addEventListener("drop",f)}Array.from(d.getMany("todos-item")).forEach(o=>{v(o)})})}}class T{constructor({model:t,view:e}){r(this,"observerOptions",{attributes:!1,childList:!0,subtree:!0,characterData:!1,attributeOldValue:!1,characterDataOldValue:!1});r(this,"observer",new MutationObserver(t=>{t.forEach(e=>{if(e.addedNodes.length){const a=this.model.readData("todoData");this.view.printItemsNumber(a),this.reorderItems()}})}));this.view=e,this.model=t}reorderItems(){let t=[];const e=Array.from(d.getMany("todos-item")).map(s=>s.querySelector(".indicator")),a=Array.from(d.getMany("todos-delete-btn"));e.forEach((s,i)=>{s&&(s.dataset.id=i,t.push({id:i,itemText:s.nextElementSibling.textContent,isCompleted:!!s.classList.contains("indicator-active")})),a[i]&&(a[i].dataset.id=i)}),this.model.setLocalStorageData("todoData",t),this.view.printItemsNumber(t)}listen(){this.observer.observe(d.get(".todos-container"),this.observerOptions)}}const p={controller:new L,model:new w,view:new I},x=[new b(p),new y(p),new E(p),new T(p)];x.forEach(n=>n.listen());
